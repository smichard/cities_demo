{
  "version": "1.1",
  "engine": "darwin/arm64|Transformer|1.40.11|latest|latest",
  "containerized": false,
  "host_distro": {
    "name": "",
    "version": "",
    "display_name": "Sonoma (14.4)"
  },
  "type": "build",
  "state": "error",
  "error": "no.data.collected",
  "target_reference": "test:latest",
  "system": {
    "type": "",
    "release": "",
    "distro": {
      "name": "",
      "version": "",
      "display_name": ""
    }
  },
  "source_image": {
    "identity": {
      "id": ""
    },
    "size": 0,
    "size_human": "",
    "create_time": "",
    "docker_version": "",
    "architecture": "",
    "container_entry": {
      "exe_path": ""
    }
  },
  "minified_image_size": 0,
  "minified_image_size_human": "",
  "minified_image": "",
  "minified_image_id": "",
  "minified_image_digest": "",
  "minified_image_has_data": false,
  "minified_by": 0,
  "artifact_location": "",
  "container_report_name": "",
  "seccomp_profile_name": "",
  "apparmor_profile_name": "",
  "image_stack": [
    {
      "is_top_image": false,
      "id": "sha256:2fd7e0b540fdfc422c0121c02c8f2f21445c2a848550a0c7c359bf380d509be4",
      "full_name": "quay.io/michard/nginx_base_image:0.2.8",
      "repo_name": "quay.io/michard/nginx_base_image",
      "version_tag": "0.2.8",
      "raw_tags": [
        "quay.io/michard/nginx_base_image:0.2.8"
      ],
      "create_time": "2024-01-12T10:12:02Z",
      "new_size": 45060096,
      "new_size_human": "45 MB",
      "instructions": [
        {
          "type": "ADD",
          "time": "2023-11-30T23:22:52Z",
          "is_nop": true,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 7629824,
          "size_human": "7.6 MB",
          "params": "file:fc714080c3bcbbce7ac746a10d7b4355ffa36293a8d435d62cd5359ea8eb8364 in /",
          "command_snippet": "ADD file:fc714080c3bcbbce7ac746a10d7b4355ffa...",
          "command_all": "ADD file:fc714080c3bcbbce7ac746a10d7b4355ffa36293a8d435d62cd5359ea8eb8364 /",
          "target": "/",
          "source_type": "file",
          "inst_set_time_bucket": "2023-12-01T00:15:00+01:00",
          "inst_set_time_index": 0,
          "inst_set_time_reverse_index": 4
        },
        {
          "type": "CMD",
          "time": "2023-11-30T23:22:52Z",
          "is_nop": true,
          "is_exec_form": true,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "[\"/bin/sh\"]\n",
          "command_snippet": "CMD [\"/bin/sh\"]\n",
          "command_all": "CMD [\"/bin/sh\"]\n",
          "inst_set_time_bucket": "2023-12-01T00:15:00+01:00",
          "inst_set_time_index": 0,
          "inst_set_time_reverse_index": 4
        },
        {
          "type": "LABEL",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "maintainer=NGINX Docker Maintainers <docker-maint@nginx.com>",
          "command_snippet": "LABEL maintainer=NGINX Docker Maintainers <d...",
          "command_all": "LABEL maintainer=NGINX Docker Maintainers <docker-maint@nginx.com>",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "ENV",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "NGINX_VERSION=1.25.3",
          "command_snippet": "ENV NGINX_VERSION=1.25.3",
          "command_all": "ENV NGINX_VERSION=1.25.3",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "ENV",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "PKG_RELEASE=1",
          "command_snippet": "ENV PKG_RELEASE=1",
          "command_all": "ENV PKG_RELEASE=1",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "ARG",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "UID=101",
          "command_snippet": "ARG UID=101",
          "command_all": "ARG UID=101",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "ARG",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "GID=101",
          "command_snippet": "ARG GID=101",
          "command_all": "ARG GID=101",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "RUN",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 5430784,
          "size_human": "5.4 MB",
          "command_snippet": "RUN set -x && addgroup -g $GID -S nginx || t...",
          "command_all": "RUN set -x && addgroup -g $GID -S nginx || true && adduser -S -D -H -u $UID -h /var/cache/nginx -s /sbin/nologin -G nginx -g nginx nginx || true && apkArch=$(cat /etc/apk/arch) && nginxPackages=         nginx=${NGINX_VERSION}-r${PKG_RELEASE}      && apk add --no-cache --virtual .checksum-deps openssl && case $apkArch in x86_64|aarch64) set -x && KEY_SHA512=e09fa32f0a0eab2b879ccbbc4d0e4fb9751486eedda75e35fac65802cc9faa266425edf83e261137a2f4d16281ce2c1a5f4502930fe75154723da014214f0655 && wget -O /tmp/nginx_signing.rsa.pub https://nginx.org/keys/nginx_signing.rsa.pub && if echo $KEY_SHA512 */tmp/nginx_signing.rsa.pub | sha512sum -c -; then echo key verification succeeded!; mv /tmp/nginx_signing.rsa.pub /etc/apk/keys/; else echo key verification failed!; exit 1; fi && apk add -X https://nginx.org/packages/mainline/alpine/v$(egrep -o '^[0-9]+.[0-9]+' /etc/alpine-release)/main --no-cache $nginxPackages ;; *) set -x && tempDir=$(mktemp -d) && chown nobody:nobody $tempDir && apk add --no-cache --virtual .build-deps gcc libc-dev make openssl-dev pcre2-dev zlib-dev linux-headers bash alpine-sdk findutils && su nobody -s /bin/sh -c                  export HOME=${tempDir}                 && cd ${tempDir}                 && curl -f -O https://hg.nginx.org/pkg-oss/archive/${NGINX_VERSION}-${PKG_RELEASE}.tar.gz                 && PKGOSSCHECKSUM=\"00b217979265cc9d66c991c9c89427558936dbaa568d175ca45780589171d94f1866217be09a83438d95494cf38baaa6788320f6d8d23f2fb29c03117391ff88 *${NGINX_VERSION}-${PKG_RELEASE}.tar.gz\"                 && if [ \"$(openssl sha512 -r ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz)\" = \"$PKGOSSCHECKSUM\" ]; then                     echo \"pkg-oss tarball checksum verification succeeded!\";                 else                     echo \"pkg-oss tarball checksum verification failed!\";                     exit 1;                 fi                 && tar xzvf ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz                 && cd pkg-oss-${NGINX_VERSION}-${PKG_RELEASE}                 && cd alpine                 && make base                 && apk index -o ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz ${tempDir}/packages/alpine/${apkArch}/*.apk                 && abuild-sign -k ${tempDir}/.abuild/abuild-key.rsa ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz                  && cp ${tempDir}/.abuild/abuild-key.rsa.pub /etc/apk/keys/ && apk del --no-network .build-deps && apk add -X ${tempDir}/packages/alpine/ --no-cache $nginxPackages ;; esac && apk del --no-network .checksum-deps && if [ -f $tempDir ]; then rm -rf $tempDir; fi && if [ -n /etc/apk/keys/abuild-key.rsa.pub ]; then rm -f /etc/apk/keys/abuild-key.rsa.pub; fi && if [ -n /etc/apk/keys/nginx_signing.rsa.pub ]; then rm -f /etc/apk/keys/nginx_signing.rsa.pub; fi && apk add --no-cache --virtual .gettext gettext && mv /usr/bin/envsubst /tmp/ && runDeps=$(         scanelf --needed --nobanner /tmp/envsubst             | awk '{ gsub(/,/, nso:, $2); print so: $2 }'             | sort -u             | xargs -r apk info --installed             | sort -u     ) && apk add --no-cache $runDeps && apk del --no-network .gettext && mv /tmp/envsubst /usr/local/bin/ && apk add --no-cache tzdata && ln -sf /dev/stdout /var/log/nginx/access.log && ln -sf /dev/stderr /var/log/nginx/error.log && mkdir /docker-entrypoint.d",
          "system_commands": [
            "set -x",
            "addgroup -g $GID -S nginx || true",
            "adduser -S -D -H -u $UID -h /var/cache/nginx -s /sbin/nologin -G nginx -g nginx nginx || true",
            "apkArch=$(cat /etc/apk/arch)",
            "nginxPackages=         nginx=${NGINX_VERSION}-r${PKG_RELEASE}",
            "apk add --no-cache --virtual .checksum-deps openssl",
            "case $apkArch in x86_64|aarch64) set -x",
            "KEY_SHA512=e09fa32f0a0eab2b879ccbbc4d0e4fb9751486eedda75e35fac65802cc9faa266425edf83e261137a2f4d16281ce2c1a5f4502930fe75154723da014214f0655",
            "wget -O /tmp/nginx_signing.rsa.pub https://nginx.org/keys/nginx_signing.rsa.pub",
            "if echo $KEY_SHA512 */tmp/nginx_signing.rsa.pub | sha512sum -c -; then echo key verification succeeded!; mv /tmp/nginx_signing.rsa.pub /etc/apk/keys/; else echo key verification failed!; exit 1; fi",
            "apk add -X https://nginx.org/packages/mainline/alpine/v$(egrep -o '^[0-9]+.[0-9]+' /etc/alpine-release)/main --no-cache $nginxPackages ;; *) set -x",
            "tempDir=$(mktemp -d)",
            "chown nobody:nobody $tempDir",
            "apk add --no-cache --virtual .build-deps gcc libc-dev make openssl-dev pcre2-dev zlib-dev linux-headers bash alpine-sdk findutils",
            "su nobody -s /bin/sh -c                  export HOME=${tempDir}",
            "cd ${tempDir}",
            "curl -f -O https://hg.nginx.org/pkg-oss/archive/${NGINX_VERSION}-${PKG_RELEASE}.tar.gz",
            "PKGOSSCHECKSUM=\"00b217979265cc9d66c991c9c89427558936dbaa568d175ca45780589171d94f1866217be09a83438d95494cf38baaa6788320f6d8d23f2fb29c03117391ff88 *${NGINX_VERSION}-${PKG_RELEASE}.tar.gz\"",
            "if [ \"$(openssl sha512 -r ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz)\" = \"$PKGOSSCHECKSUM\" ]; then                     echo \"pkg-oss tarball checksum verification succeeded!\";                 else                     echo \"pkg-oss tarball checksum verification failed!\";                     exit 1;                 fi",
            "tar xzvf ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz",
            "cd pkg-oss-${NGINX_VERSION}-${PKG_RELEASE}",
            "cd alpine",
            "make base",
            "apk index -o ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz ${tempDir}/packages/alpine/${apkArch}/*.apk",
            "abuild-sign -k ${tempDir}/.abuild/abuild-key.rsa ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz",
            "cp ${tempDir}/.abuild/abuild-key.rsa.pub /etc/apk/keys/",
            "apk del --no-network .build-deps",
            "apk add -X ${tempDir}/packages/alpine/ --no-cache $nginxPackages ;; esac",
            "apk del --no-network .checksum-deps",
            "if [ -f $tempDir ]; then rm -rf $tempDir; fi",
            "if [ -n /etc/apk/keys/abuild-key.rsa.pub ]; then rm -f /etc/apk/keys/abuild-key.rsa.pub; fi",
            "if [ -n /etc/apk/keys/nginx_signing.rsa.pub ]; then rm -f /etc/apk/keys/nginx_signing.rsa.pub; fi",
            "apk add --no-cache --virtual .gettext gettext",
            "mv /usr/bin/envsubst /tmp/",
            "runDeps=$(         scanelf --needed --nobanner /tmp/envsubst             | awk '{ gsub(/,/, nso:, $2); print so: $2 }'             | sort -u             | xargs -r apk info --installed             | sort -u     )",
            "apk add --no-cache $runDeps",
            "apk del --no-network .gettext",
            "mv /tmp/envsubst /usr/local/bin/",
            "apk add --no-cache tzdata",
            "ln -sf /dev/stdout /var/log/nginx/access.log",
            "ln -sf /dev/stderr /var/log/nginx/error.log",
            "mkdir /docker-entrypoint.d"
          ],
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "RUN",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 20992,
          "size_human": "21 kB",
          "command_snippet": "RUN sed -i s,listen       80;,listen       8...",
          "command_all": "RUN sed -i s,listen       80;,listen       8080;, /etc/nginx/conf.d/default.conf && sed -i /user  nginx;/d /etc/nginx/nginx.conf && sed -i s,/var/run/nginx.pid,/tmp/nginx.pid, /etc/nginx/nginx.conf && sed -i /^http {/a     proxy_temp_path /tmp/proxy_temp;n    client_body_temp_path /tmp/client_temp;n    fastcgi_temp_path /tmp/fastcgi_temp;n    uwsgi_temp_path /tmp/uwsgi_temp;n    scgi_temp_path /tmp/scgi_temp;n /etc/nginx/nginx.conf && chown -R $UID:0 /var/cache/nginx && chmod -R g+w /var/cache/nginx && chown -R $UID:0 /etc/nginx && chmod -R g+w /etc/nginx",
          "system_commands": [
            "sed -i s,listen       80;,listen       8080;, /etc/nginx/conf.d/default.conf",
            "sed -i /user  nginx;/d /etc/nginx/nginx.conf",
            "sed -i s,/var/run/nginx.pid,/tmp/nginx.pid, /etc/nginx/nginx.conf",
            "sed -i /^http {/a     proxy_temp_path /tmp/proxy_temp;n    client_body_temp_path /tmp/client_temp;n    fastcgi_temp_path /tmp/fastcgi_temp;n    uwsgi_temp_path /tmp/uwsgi_temp;n    scgi_temp_path /tmp/scgi_temp;n /etc/nginx/nginx.conf",
            "chown -R $UID:0 /var/cache/nginx",
            "chmod -R g+w /var/cache/nginx",
            "chown -R $UID:0 /etc/nginx",
            "chmod -R g+w /etc/nginx"
          ],
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "COPY",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 3584,
          "size_human": "3.6 kB",
          "params": "docker-entrypoint.sh /",
          "command_snippet": "COPY docker-entrypoint.sh /",
          "command_all": "COPY docker-entrypoint.sh /",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "COPY",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 4608,
          "size_human": "4.6 kB",
          "params": "10-listen-on-ipv6-by-default.sh /docker-entrypoint.d",
          "command_snippet": "COPY 10-listen-on-ipv6-by-default.sh /docker...",
          "command_all": "COPY 10-listen-on-ipv6-by-default.sh /docker-entrypoint.d",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "COPY",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 2560,
          "size_human": "2.6 kB",
          "params": "15-local-resolvers.envsh /docker-entrypoint.d",
          "command_snippet": "COPY 15-local-resolvers.envsh /docker-entryp...",
          "command_all": "COPY 15-local-resolvers.envsh /docker-entrypoint.d",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "COPY",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 5120,
          "size_human": "5.1 kB",
          "params": "20-envsubst-on-templates.sh /docker-entrypoint.d",
          "command_snippet": "COPY 20-envsubst-on-templates.sh /docker-ent...",
          "command_all": "COPY 20-envsubst-on-templates.sh /docker-entrypoint.d",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "COPY",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 7168,
          "size_human": "7.2 kB",
          "params": "30-tune-worker-processes.sh /docker-entrypoint.d",
          "command_snippet": "COPY 30-tune-worker-processes.sh /docker-ent...",
          "command_all": "COPY 30-tune-worker-processes.sh /docker-entrypoint.d",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "ENTRYPOINT",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "is_exec_form": true,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "[\"/docker-entrypoint.sh\"]\n",
          "command_snippet": "ENTRYPOINT [\"/docker-entrypoint.sh\"]\n",
          "command_all": "ENTRYPOINT [\"/docker-entrypoint.sh\"]\n",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "EXPOSE",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "8080/tcp",
          "command_snippet": "EXPOSE 8080/tcp",
          "command_all": "EXPOSE 8080/tcp",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "STOPSIGNAL",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "SIGQUIT",
          "command_snippet": "STOPSIGNAL SIGQUIT",
          "command_all": "STOPSIGNAL SIGQUIT",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "USER",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "101",
          "command_snippet": "USER 101",
          "command_all": "USER 101",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "CMD",
          "time": "2024-01-08T00:17:57Z",
          "is_nop": false,
          "is_exec_form": true,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "[\"nginx\",\"-g\",\"daemon off;\"]\n",
          "command_snippet": "CMD [\"nginx\",\"-g\",\"daemon off;\"]\n",
          "command_all": "CMD [\"nginx\",\"-g\",\"daemon off;\"]\n",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T01:15:00+01:00",
          "inst_set_time_index": 1,
          "inst_set_time_reverse_index": 3
        },
        {
          "type": "ENV",
          "time": "2024-01-08T01:19:12Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "NJS_VERSION=0.8.2",
          "command_snippet": "ENV NJS_VERSION=0.8.2",
          "command_all": "ENV NJS_VERSION=0.8.2",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T02:15:00+01:00",
          "inst_set_time_index": 2,
          "inst_set_time_reverse_index": 2
        },
        {
          "type": "ARG",
          "time": "2024-01-08T01:19:12Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "UID=101",
          "command_snippet": "ARG UID=101",
          "command_all": "ARG UID=101",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T02:15:00+01:00",
          "inst_set_time_index": 2,
          "inst_set_time_reverse_index": 2
        },
        {
          "type": "ARG",
          "time": "2024-01-08T01:19:12Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "GID=101",
          "command_snippet": "ARG GID=101",
          "command_all": "ARG GID=101",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T02:15:00+01:00",
          "inst_set_time_index": 2,
          "inst_set_time_reverse_index": 2
        },
        {
          "type": "USER",
          "time": "2024-01-08T01:19:12Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "root",
          "command_snippet": "USER root",
          "command_all": "USER root",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T02:15:00+01:00",
          "inst_set_time_index": 2,
          "inst_set_time_reverse_index": 2
        },
        {
          "type": "RUN",
          "time": "2024-01-08T01:19:12Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 31300608,
          "size_human": "31 MB",
          "command_snippet": "RUN set -x && apkArch=$(cat /etc/apk/arch) &...",
          "command_all": "RUN set -x && apkArch=$(cat /etc/apk/arch) && nginxPackages=         nginx=${NGINX_VERSION}-r${PKG_RELEASE}         nginx-module-xslt=${NGINX_VERSION}-r${PKG_RELEASE}         nginx-module-geoip=${NGINX_VERSION}-r${PKG_RELEASE}         nginx-module-image-filter=${NGINX_VERSION}-r${PKG_RELEASE}         nginx-module-njs=${NGINX_VERSION}.${NJS_VERSION}-r${PKG_RELEASE}      && apk add --no-cache --virtual .checksum-deps openssl && case $apkArch in x86_64|aarch64) set -x && KEY_SHA512=e09fa32f0a0eab2b879ccbbc4d0e4fb9751486eedda75e35fac65802cc9faa266425edf83e261137a2f4d16281ce2c1a5f4502930fe75154723da014214f0655 && wget -O /tmp/nginx_signing.rsa.pub https://nginx.org/keys/nginx_signing.rsa.pub && if echo $KEY_SHA512 */tmp/nginx_signing.rsa.pub | sha512sum -c -; then echo key verification succeeded!; mv /tmp/nginx_signing.rsa.pub /etc/apk/keys/; else echo key verification failed!; exit 1; fi && apk add -X https://nginx.org/packages/mainline/alpine/v$(egrep -o '^[0-9]+.[0-9]+' /etc/alpine-release)/main --no-cache $nginxPackages ;; *) set -x && tempDir=$(mktemp -d) && chown nobody:nobody $tempDir && apk add --no-cache --virtual .build-deps gcc libc-dev make openssl-dev pcre2-dev zlib-dev linux-headers libxslt-dev gd-dev geoip-dev libedit-dev bash alpine-sdk findutils && su nobody -s /bin/sh -c                  export HOME=${tempDir}                 && cd ${tempDir}                 && curl -f -O https://hg.nginx.org/pkg-oss/archive/${NGINX_VERSION}-${PKG_RELEASE}.tar.gz                 && PKGOSSCHECKSUM=\"00b217979265cc9d66c991c9c89427558936dbaa568d175ca45780589171d94f1866217be09a83438d95494cf38baaa6788320f6d8d23f2fb29c03117391ff88 *${NGINX_VERSION}-${PKG_RELEASE}.tar.gz\"                 && if [ \"$(openssl sha512 -r ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz)\" = \"$PKGOSSCHECKSUM\" ]; then                     echo \"pkg-oss tarball checksum verification succeeded!\";                 else                     echo \"pkg-oss tarball checksum verification failed!\";                     exit 1;                 fi                 && tar xzvf ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz                 && cd pkg-oss-${NGINX_VERSION}-${PKG_RELEASE}                 && cd alpine                 && make module-geoip module-image-filter module-njs module-xslt                 && apk index -o ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz ${tempDir}/packages/alpine/${apkArch}/*.apk                 && abuild-sign -k ${tempDir}/.abuild/abuild-key.rsa ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz                  && cp ${tempDir}/.abuild/abuild-key.rsa.pub /etc/apk/keys/ && apk del --no-network .build-deps && apk add -X ${tempDir}/packages/alpine/ --no-cache $nginxPackages ;; esac && apk del --no-network .checksum-deps && if [ -f $tempDir ]; then rm -rf $tempDir; fi && if [ -n /etc/apk/keys/abuild-key.rsa.pub ]; then rm -f /etc/apk/keys/abuild-key.rsa.pub; fi && if [ -n /etc/apk/keys/nginx_signing.rsa.pub ]; then rm -f /etc/apk/keys/nginx_signing.rsa.pub; fi && apk add --no-cache curl ca-certificates",
          "system_commands": [
            "set -x",
            "apkArch=$(cat /etc/apk/arch)",
            "nginxPackages=         nginx=${NGINX_VERSION}-r${PKG_RELEASE}         nginx-module-xslt=${NGINX_VERSION}-r${PKG_RELEASE}         nginx-module-geoip=${NGINX_VERSION}-r${PKG_RELEASE}         nginx-module-image-filter=${NGINX_VERSION}-r${PKG_RELEASE}         nginx-module-njs=${NGINX_VERSION}.${NJS_VERSION}-r${PKG_RELEASE}",
            "apk add --no-cache --virtual .checksum-deps openssl",
            "case $apkArch in x86_64|aarch64) set -x",
            "KEY_SHA512=e09fa32f0a0eab2b879ccbbc4d0e4fb9751486eedda75e35fac65802cc9faa266425edf83e261137a2f4d16281ce2c1a5f4502930fe75154723da014214f0655",
            "wget -O /tmp/nginx_signing.rsa.pub https://nginx.org/keys/nginx_signing.rsa.pub",
            "if echo $KEY_SHA512 */tmp/nginx_signing.rsa.pub | sha512sum -c -; then echo key verification succeeded!; mv /tmp/nginx_signing.rsa.pub /etc/apk/keys/; else echo key verification failed!; exit 1; fi",
            "apk add -X https://nginx.org/packages/mainline/alpine/v$(egrep -o '^[0-9]+.[0-9]+' /etc/alpine-release)/main --no-cache $nginxPackages ;; *) set -x",
            "tempDir=$(mktemp -d)",
            "chown nobody:nobody $tempDir",
            "apk add --no-cache --virtual .build-deps gcc libc-dev make openssl-dev pcre2-dev zlib-dev linux-headers libxslt-dev gd-dev geoip-dev libedit-dev bash alpine-sdk findutils",
            "su nobody -s /bin/sh -c                  export HOME=${tempDir}",
            "cd ${tempDir}",
            "curl -f -O https://hg.nginx.org/pkg-oss/archive/${NGINX_VERSION}-${PKG_RELEASE}.tar.gz",
            "PKGOSSCHECKSUM=\"00b217979265cc9d66c991c9c89427558936dbaa568d175ca45780589171d94f1866217be09a83438d95494cf38baaa6788320f6d8d23f2fb29c03117391ff88 *${NGINX_VERSION}-${PKG_RELEASE}.tar.gz\"",
            "if [ \"$(openssl sha512 -r ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz)\" = \"$PKGOSSCHECKSUM\" ]; then                     echo \"pkg-oss tarball checksum verification succeeded!\";                 else                     echo \"pkg-oss tarball checksum verification failed!\";                     exit 1;                 fi",
            "tar xzvf ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz",
            "cd pkg-oss-${NGINX_VERSION}-${PKG_RELEASE}",
            "cd alpine",
            "make module-geoip module-image-filter module-njs module-xslt",
            "apk index -o ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz ${tempDir}/packages/alpine/${apkArch}/*.apk",
            "abuild-sign -k ${tempDir}/.abuild/abuild-key.rsa ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz",
            "cp ${tempDir}/.abuild/abuild-key.rsa.pub /etc/apk/keys/",
            "apk del --no-network .build-deps",
            "apk add -X ${tempDir}/packages/alpine/ --no-cache $nginxPackages ;; esac",
            "apk del --no-network .checksum-deps",
            "if [ -f $tempDir ]; then rm -rf $tempDir; fi",
            "if [ -n /etc/apk/keys/abuild-key.rsa.pub ]; then rm -f /etc/apk/keys/abuild-key.rsa.pub; fi",
            "if [ -n /etc/apk/keys/nginx_signing.rsa.pub ]; then rm -f /etc/apk/keys/nginx_signing.rsa.pub; fi",
            "apk add --no-cache curl ca-certificates"
          ],
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T02:15:00+01:00",
          "inst_set_time_index": 2,
          "inst_set_time_reverse_index": 2
        },
        {
          "type": "USER",
          "time": "2024-01-08T01:19:12Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "101",
          "command_snippet": "USER 101",
          "command_all": "USER 101",
          "comment": "buildkit.dockerfile.v0",
          "is_buildkit_instruction": true,
          "inst_set_time_bucket": "2024-01-08T02:15:00+01:00",
          "inst_set_time_index": 2,
          "inst_set_time_reverse_index": 2
        },
        {
          "type": "USER",
          "time": "2024-01-12T10:12:00Z",
          "is_nop": true,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "params": "0",
          "command_snippet": "USER 0",
          "command_all": "USER 0",
          "inst_set_time_bucket": "2024-01-12T11:00:00+01:00",
          "inst_set_time_index": 3,
          "inst_set_time_reverse_index": 1
        },
        {
          "type": "RUN",
          "time": "2024-01-12T10:12:01Z",
          "is_nop": false,
          "local_image_exists": true,
          "intermediate_image_id": "sha256:<missing>",
          "layer_index": 0,
          "size": 0,
          "command_snippet": "RUN apk add --no-cache tar",
          "command_all": "RUN apk add --no-cache tar",
          "system_commands": [
            "apk add --no-cache tar"
          ],
          "inst_set_time_bucket": "2024-01-12T11:00:00+01:00",
          "inst_set_time_index": 3,
          "inst_set_time_reverse_index": 1
        },
        {
          "type": "USER",
          "time": "2024-01-12T10:12:02Z",
          "is_last_instruction": true,
          "is_nop": true,
          "local_image_exists": true,
          "layer_index": 0,
          "size": 654848,
          "size_human": "655 kB",
          "params": "10001",
          "command_snippet": "USER 10001",
          "command_all": "USER 10001",
          "comment": "FROM quay.io/nginx/nginx-unprivileged:alpine3.18",
          "raw_tags": [
            "quay.io/michard/nginx_base_image:0.2.8"
          ],
          "inst_set_time_bucket": "2024-01-12T11:00:00+01:00",
          "inst_set_time_index": 3,
          "inst_set_time_reverse_index": 1
        }
      ]
    },
    {
      "is_top_image": true,
      "id": "sha256:2c2be56965e73960215123464c4e286ef3e30bf7e18a91272036a310fe54d179",
      "full_name": "localhost/test:latest",
      "repo_name": "localhost/test",
      "version_tag": "latest",
      "raw_tags": [
        "localhost/test:latest"
      ],
      "create_time": "2024-04-26T12:56:06Z",
      "new_size": 6894592,
      "new_size_human": "6.9 MB",
      "base_image_id": "sha256:2fd7e0b540fdfc422c0121c02c8f2f21445c2a848550a0c7c359bf380d509be4",
      "instructions": [
        {
          "type": "COPY",
          "time": "2024-04-26T12:56:06Z",
          "is_last_instruction": true,
          "is_nop": true,
          "local_image_exists": true,
          "layer_index": 0,
          "size": 6894592,
          "size_human": "6.9 MB",
          "params": "dir:b50324161f813216cc964affaacc78aaf12c2f98144647856031d61581ad15a5 in /usr/share/nginx/html",
          "command_snippet": "COPY dir:b50324161f813216cc964affaacc78aaf12...",
          "command_all": "COPY dir:b50324161f813216cc964affaacc78aaf12c2f98144647856031d61581ad15a5 /usr/share/nginx/html",
          "comment": "FROM quay.io/michard/nginx_base_image:0.2.8",
          "raw_tags": [
            "localhost/test:latest"
          ],
          "target": "/usr/share/nginx/html",
          "source_type": "dir",
          "inst_set_time_bucket": "2024-04-26T14:45:00+02:00",
          "inst_set_time_index": 4,
          "inst_set_time_reverse_index": 0
        }
      ]
    }
  ],
  "image_created": false,
  "image_build_engine": ""
}
